[gd_scene load_steps=16 format=3 uid="uid://44bq5me3w8xj"]

[ext_resource type="Texture2D" uid="uid://muumhlh87rk2" path="res://examples/assets/house/Ground.png" id="2_3uwr5"]
[ext_resource type="Texture2D" uid="uid://c2k807c86es1x" path="res://examples/assets/house/InsideMain.png" id="3_gpgn3"]
[ext_resource type="Texture2D" uid="uid://bdjnqqur6qqia" path="res://examples/assets/house/FrontHallway.png" id="4_aal63"]
[ext_resource type="Texture2D" uid="uid://c7ascs0jd80v2" path="res://examples/assets/house/BackHallway.png" id="5_xlnuo"]
[ext_resource type="Texture2D" uid="uid://b16k6c5etqffs" path="res://examples/assets/house/FrontLeft.png" id="6_tc10k"]
[ext_resource type="Material" uid="uid://c2lgyq8d5mpjn" path="res://addons/revealer/materials/revealable.tres" id="7_tdlwg"]
[ext_resource type="Texture2D" uid="uid://cqveii7ud31s1" path="res://examples/assets/house/FrontRight.png" id="7_yle5e"]
[ext_resource type="Texture2D" uid="uid://d0pwhiyb4vby1" path="res://examples/assets/house/Layout.png" id="8_1ld5o"]
[ext_resource type="Script" path="res://addons/revealer/scripts/revealable_group.gd" id="9_mx6yn"]
[ext_resource type="PackedScene" uid="uid://yn54lyl44ldw" path="res://examples/actors/door.tscn" id="9_u4g7f"]
[ext_resource type="PackedScene" uid="uid://ca126qkj8yrw7" path="res://examples/actors/character.tscn" id="10_gethw"]
[ext_resource type="Texture2D" uid="uid://dogyrv31pli10" path="res://examples/assets/house/Back.png" id="13_5cu42"]
[ext_resource type="Texture2D" uid="uid://cqcgaq2s81fsx" path="res://examples/assets/house/Hall.png" id="14_k6qw2"]
[ext_resource type="Texture2D" uid="uid://draqj4d2wa4xw" path="res://examples/assets/house/Main.png" id="15_vtfq6"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_sk7ic"]
size = Vector2(128, 2)

[node name="House" type="Node2D"]
texture_filter = 1

[node name="Ground" type="Sprite2D" parent="."]
position = Vector2(0, 15)
texture = ExtResource("2_3uwr5")

[node name="GroundCollider" type="StaticBody2D" parent="Ground"]
position = Vector2(0, 0.5)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Ground/GroundCollider"]
shape = SubResource("RectangleShape2D_sk7ic")

[node name="Layout" type="Sprite2D" parent="."]
position = Vector2(-2, -19)
texture = ExtResource("8_1ld5o")

[node name="BackHallwayGroup" type="Node2D" parent="." node_paths=PackedStringArray("revealable_parent", "revealable_mask")]
process_mode = 4
visible = false
script = ExtResource("9_mx6yn")
revealable_parent = NodePath("../FrontHallwayGroup/FrontHallway")
revealable_mask = NodePath("BackHallway")
reveal_group_depth = 2

[node name="BackHallway" type="Sprite2D" parent="BackHallwayGroup"]
texture_filter = 1
position = Vector2(-12, 6)
texture = ExtResource("5_xlnuo")

[node name="LeftRoomGroup" type="Node2D" parent="." node_paths=PackedStringArray("revealable_parent", "revealable_mask")]
process_mode = 4
visible = false
script = ExtResource("9_mx6yn")
revealable_parent = NodePath("../BackHallwayGroup/BackHallway")
revealable_mask = NodePath("FrontLeft")

[node name="FrontLeft" type="Sprite2D" parent="LeftRoomGroup"]
texture_filter = 1
position = Vector2(-32, 6)
texture = ExtResource("6_tc10k")

[node name="Back" type="Sprite2D" parent="."]
visible = false
position = Vector2(0, 6)
texture = ExtResource("13_5cu42")

[node name="FrontHallwayGroup" type="Node2D" parent="." node_paths=PackedStringArray("revealable_parent", "revealable_targets", "revealable_mask")]
script = ExtResource("9_mx6yn")
revealable_parent = NodePath("../EntranceRoomGroup/InsideMain")
revealable_targets = [NodePath("HallExterior")]
revealable_mask = NodePath("FrontHallway")
reveal_group_depth = 1

[node name="RightRoomGroup" type="Node2D" parent="FrontHallwayGroup" node_paths=PackedStringArray("revealable_parent", "revealable_mask")]
script = ExtResource("9_mx6yn")
revealable_parent = NodePath("../FrontHallway")
revealable_mask = NodePath("FrontRight")

[node name="FrontRight" type="Sprite2D" parent="FrontHallwayGroup/RightRoomGroup"]
modulate = Color(0.925022, 0.454282, 0.540041, 1)
texture_filter = 1
position = Vector2(23.5, 9)
texture = ExtResource("7_yle5e")

[node name="FrontHallway" type="Sprite2D" parent="FrontHallwayGroup"]
modulate = Color(1, 1, 0.054902, 1)
texture_filter = 1
position = Vector2(16, 9)
texture = ExtResource("4_aal63")

[node name="DoorToRight" parent="FrontHallwayGroup" node_paths=PackedStringArray("group_in_front", "group_behind") instance=ExtResource("9_u4g7f")]
position = Vector2(24, 12)
group_in_front = NodePath("..")
group_behind = NodePath("../RightRoomGroup")
hide_on_exit = false

[node name="HallExterior" type="Sprite2D" parent="FrontHallwayGroup"]
modulate = Color(0.0823529, 1, 1, 1)
position = Vector2(0, 6)
texture = ExtResource("14_k6qw2")

[node name="EntranceRoomGroup" type="Node2D" parent="." node_paths=PackedStringArray("revealable_parent", "revealable_mask")]
script = ExtResource("9_mx6yn")
revealable_parent = NodePath("../Main")
revealable_mask = NodePath("InsideMain")

[node name="InsideMain" type="Sprite2D" parent="EntranceRoomGroup"]
texture_filter = 1
material = ExtResource("7_tdlwg")
position = Vector2(-8.5, 8)
texture = ExtResource("3_gpgn3")

[node name="Door" parent="EntranceRoomGroup" node_paths=PackedStringArray("group_in_front", "group_behind") instance=ExtResource("9_u4g7f")]
position = Vector2(-1, 12)
group_in_front = NodePath("..")
group_behind = NodePath("../../FrontHallwayGroup")
hide_on_exit = false

[node name="Main" type="Sprite2D" parent="."]
position = Vector2(0, 6)
texture = ExtResource("15_vtfq6")

[node name="Door" parent="Main" node_paths=PackedStringArray("group_behind") instance=ExtResource("9_u4g7f")]
position = Vector2(-14, 6)
group_behind = NodePath("../../EntranceRoomGroup")
hide_on_exit = false

[node name="Character" parent="." instance=ExtResource("10_gethw")]
position = Vector2(-54, 10)
speed = 18.0

[connection signal="linked_f2b" from="FrontHallwayGroup/DoorToRight" to="Main/Door" method="back_to_front"]
[connection signal="linked_b2f" from="EntranceRoomGroup/Door" to="Main/Door" method="front_to_back"]
[connection signal="linked_f2b" from="EntranceRoomGroup/Door" to="Main/Door" method="back_to_front"]
